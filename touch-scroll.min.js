(function(k){var M={y:0,scrollHeight:0,elastic:!navigator.userAgent.match(/android/i),momentum:!0,elasticDamp:0.6,elasticTime:50,reboundTime:400,momentumDamp:0.9,momentumTime:300,iPadMomentumDamp:0.95,iPadMomentumTime:1200,touchTags:["select","input","textarea"],onScroll:null},i={init:function(c){return this.each(function(){function i(){var a=(new Date).getTime(),a=Math.min(1,(a-D)/s);1>a&&(t=setTimeout(i,10));c.onScroll(-(u+(d-u)*(--a*a*a+1)),-e,g)}function E(a){return"translate"+(F?"3d(0,":"(0,")+
a+"px"+(F?",0)":")")}function o(a){s=a=a||"0";f.css("-webkit-transition-duration",a+"ms")}function v(){if(w){var a=window.getComputedStyle(f[0]).webkitTransform;if(a&&"none"!==a)return(new WebKitCSSMatrix(a)).f}return d}function G(){0<d?x(0,b.reboundTime):d<e&&x(e,b.reboundTime)}function y(a){if(w&&!l){var H=j;j=v();0<j?b.elastic?(l=!0,d=0,z(j-H,b.elasticDamp,1,g,b.elasticTime)):(o(0),m(0)):j<e?b.elastic?(l=!0,d=e,z(j-H,b.elasticDamp,1,g,b.elasticTime)):(o(0),m(e)):a&&(p=setTimeout(y,20,!0))}}function x(a,
b){a!==d&&(n=!0,o(b),m(a))}function z(a,b,c,f,j){for(var i=Math.abs(a),h=0;0.1<i;)i*=b,h+=i;h>f&&(h=f);h>c&&(0>a&&(h=-h),h+=d,0<g&&(h>2*g?h=2*g:h<e-2*g&&(h=e-2*g)),x(Math.round(h),j));y(!0)}function A(a){if(a.originalEvent){if(a.originalEvent.touches&&a.originalEvent.touches.length)return a.originalEvent.touches;if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)return a.originalEvent.changedTouches}return a.touches}function B(a,b,c){var d=document.createEvent("MouseEvent");
d.initMouseEvent(a,!0,!0,b.view,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);c.dispatchEvent(d)}function I(a){for(;1!==a.nodeType;)a=a.parentNode;return a}var b=k.extend(M,c);if(this._init)return this.update();this._init=!0;var f=k(this),d=-b.y,J=0,C=0,j=0,g=0,e=0,q=0,r=!1,l=!1,n=!1,p,K=!!navigator.platform.match(/ipad/i),w="WebKitCSSMatrix"in window,F=w&&"m11"in new WebKitCSSMatrix,t=0,u=0,D=0,s=0,L=this.update=function(){g=f.height();q=b.scrollHeight?b.scrollHeight:f.prop?f.prop("scrollHeight"):
f.attr("scrollHeight");q<g&&(q=g);e=g-q;clearTimeout(p);y(!1)};L();f.css({"-webkit-transition-property":"-webkit-transform","-webkit-transition-timing-function":"cubic-bezier(0,0,0.2,1)","-webkit-transition-duration":"0","-webkit-transform":E(d)});window.addEventListener("onorientationchange"in window?"orientationchange":"resize",function(){L();if(c.onScroll)c.onScroll(-d,-e,g)},!1);f.bind("touchstart.touchScroll",function(a){if(-1===k.inArray(a.target.tagName.toLowerCase(),b.touchTags)){a.preventDefault();
a.stopPropagation();a=A(a)[0];B("mousedown",a,I(a.target));r=!0;n=!1;C=0;clearTimeout(p);o(0);if(b.momentum){var c=v();c!==d&&(m(c),n=!0)}J=a.pageY-d}});f.bind("touchmove.touchScroll",function(a){r&&(a=A(a)[0].pageY-J,0<a?a=b.elastic?a/2:0:a<e&&(a=b.elastic?(a+e)/2:e),C=a-d,n=!0,m(a))});f.bind("touchend.touchScroll touchcancel.touchScroll",function(a){if(r)if(r=!1,n)0<d||d<e?G():b.momentum&&z(C,K?b.iPadMomentumDamp:b.momentumDamp,40,2E3,K?b.iPadMomentumTime:b.momentumTime);else{var a=A(a)[0],c=I(a.target);
B("mouseup",a,c);B("click",a,c)}});f.bind("webkitTransitionEnd.touchScroll",function(){l&&(l=!1,G());clearTimeout(p)});var m=this.setPosition=function(a){u=d;d=a;f.css("-webkit-transform",E(d));if(c.onScroll)if(clearInterval(t),"0"!==s)D=(new Date).getTime(),t=setTimeout(i,10);else c.onScroll(-a,-e,g)};this.getPosition=function(){return v()}})},update:function(){return this.each(function(){this.update()})},getPosition:function(){var c=[];this.each(function(){c.push(-this.getPosition())});return c},
setPosition:function(c){return this.each(function(){this.setPosition(-c)})}};k.fn.touchScroll=function(c){if(i[c])return i[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof c||!c)return i.init.apply(this,arguments);k.error("Method "+c+" does not exist on jQuery.touchScroll")}})(jQuery);