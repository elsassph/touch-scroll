(function(b){var c={y:0,scrollHeight:0,elastic:!navigator.userAgent.match(/android/i),momentum:true,elasticDamp:0.6,elasticTime:50,reboundTime:400,momentumDamp:0.9,momentumTime:300,iPadMomentumDamp:0.95,iPadMomentumTime:1200,maxSpeed:2000,touchTags:["select","input","textarea"],onScroll:null};var a={init:function(d){return this.each(function(){var J=b.extend(c,d);if(!!this._init){return this.update()}this._init=true;var r=b(this),e=-J.y,n=0,g=0,q=0,f=0,L=0,y=0,R=false,I=false,h=false,H,K=!!navigator.platform.match(/ipad/i),s="WebKitCSSMatrix" in window,v=s&&"m11" in new WebKitCSSMatrix(),B=0,C=0,u=0,z=0,t=J.maxSpeed,F=false;var E=this.update=function(){f=r.height();if(J.scrollHeight){y=J.scrollHeight}else{if(r.prop){y=r.prop("scrollHeight")}else{y=r.attr("scrollHeight")}}if(y<f){y=f}L=f-y;clearTimeout(H);j(false)};E();r.css({"-webkit-transition-property":"-webkit-transform","-webkit-transition-timing-function":"cubic-bezier(0,0,0.2,1)","-webkit-transition-duration":"0","-webkit-transform":N(e)});window.addEventListener("onorientationchange" in window?"orientationchange":"resize",O,false);r.bind("touchstart.touchScroll",G);r.bind("touchmove.touchScroll",p);r.bind("touchend.touchScroll touchcancel.touchScroll",x);r.bind("webkitTransitionEnd.touchScroll",A);if(J.listen){J.listen.bind("touchstart.touchScroll",G);J.listen.bind("touchmove.touchScroll",p);J.listen.bind("touchend.touchScroll touchcancel.touchScroll",x)}function l(){var U=new Date().getTime();var T=Math.min(1,(U-u)/z);if(T<1){B=setTimeout(l,10)}var o=C+(e-C)*(--T*T*T+1);d.onScroll(-o,-L,f)}var M=this.setPosition=function(U,o,T){if(o){Q(o)}C=e;e=U;r.css("-webkit-transform",N(e));if(d.onScroll){clearInterval(B);if(z!=="0"){u=new Date().getTime();B=setTimeout(l,10)}else{d.onScroll(-U,-L,f)}}};function O(){setTimeout(function(){E();if(d.onScroll){d.onScroll(-e,-L,f)}},1)}function N(o){return"translate"+(v?"3d(0,":"(0,")+o+"px"+(v?",0)":")")}function Q(o){o=o||"0";z=o;r.css("-webkit-transition-duration",o+"ms")}function D(){if(s){var T=window.getComputedStyle(r[0]).webkitTransform;if(!!T&&T!=="none"){var o=new WebKitCSSMatrix(T);return o.f}}return e}this.getPosition=function(){return D()};this.setSpeed=function(o){t=isNaN(o)?c.maxSpeed:o};this.fixScroll=function(){F=true;R=false};this.freeScroll=function(){F=false};function m(){if(e>0){P(0,J.reboundTime)}else{if(e<L){P(L,J.reboundTime)}}}function A(){if(I){I=false;m()}clearTimeout(H)}function j(T){if(!s||I){return}var o=q;q=D();if(q>0){if(J.elastic){I=true;e=0;k(q-o,J.elasticDamp,1,f,J.elasticTime)}else{Q(0);M(0)}}else{if(q<L){if(J.elastic){I=true;e=L;k(q-o,J.elasticDamp,1,f,J.elasticTime)}else{Q(0);M(L)}}else{if(T){H=setTimeout(j,20,true)}}}}function P(o,T){if(o===e){return}h=true;Q(T);M(o)}function k(Z,U,T,W,V){var X=Math.abs(Z),o=0;while(X>0.1){X*=U;o+=X}if(o>W){o=W}if(o>T){if(Z<0){o=-o}o+=e;if(f>0){if(o>f*2){var Y=o;o=f*2}else{if(o<L-f*2){o=L-f*2}}}P(Math.round(o),V)}j(true)}function w(o){if(o.originalEvent){if(o.originalEvent.touches&&o.originalEvent.touches.length){return o.originalEvent.touches}else{if(o.originalEvent.changedTouches&&o.originalEvent.changedTouches.length){return o.originalEvent.changedTouches}}}return o.touches}function S(o,V,U){var T=document.createEvent("MouseEvent");T.initMouseEvent(o,true,true,V.view,1,V.screenX,V.screenY,V.clientX,V.clientY,false,false,false,false,0,null);U.dispatchEvent(T)}function i(o){while(o.nodeType!==1){o=o.parentNode}return o}function G(o){if(b.inArray(o.target.tagName.toLowerCase(),J.touchTags)!==-1){return}o.preventDefault();o.stopPropagation();if(t==0||F){return}var U=w(o)[0];S("mousedown",U,i(U.target));R=true;h=false;g=0;clearTimeout(H);clearInterval(B);Q(0);if(J.momentum){var T=D();if(T!==e){M(T);h=true}}n=U.pageY-e}function p(T){if(!R){return}var o=w(T)[0].pageY-n;if(o>0){if(J.elastic){o/=2}else{o=0}}else{if(o<L){if(J.elastic){o=(o+L)/2}else{o=L}}}g=o-e;h=true;M(o)}function x(T){if(!R){return}R=false;if(h){if(e>0||e<L){m()}else{if(J.momentum){k(g,K?J.iPadMomentumDamp:J.momentumDamp,40,t,K?J.iPadMomentumTime:J.momentumTime)}}}else{var U=w(T)[0],o=i(U.target);S("mouseup",U,o);S("click",U,o)}}})},update:function(){return this.each(function(){if(this.update){this.update()}})},getPosition:function(){var d=[];this.each(function(){if(this.getPosition){d.push(-this.getPosition())}});return d},setPosition:function(f,d,e){return this.each(function(){if(this.setPosition){this.setPosition(-f,d,e)}})},setSpeed:function(d){return this.each(function(){if(this.setSpeed){this.setSpeed(d)}})},fixScroll:function(){return this.each(function(){if(this.fixScroll){this.fixScroll()}})},freeScroll:function(){return this.each(function(){if(this.freeScroll){this.freeScroll()}})}};b.fn.touchScroll=function(d){if(a[d]){return a[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.init.apply(this,arguments)}else{b.error("Method "+d+" does not exist on jQuery.touchScroll")}}}})(jQuery);